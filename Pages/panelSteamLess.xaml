<Page x:Class="Project_Lightning.Pages.panelSteamLess"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      Title="panelSteamLess">

    <Page.Resources>
        <!--ESTILO DEL SCROLLVIEW-->
        <Style TargetType="ScrollBar">
            <Setter Property="Width" Value="3"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid Background="Transparent">
                            <Track Name="PART_Track" IsDirectionReversed="True">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineUpCommand" Visibility="Collapsed"/>
                                </Track.DecreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Border Background="#555" CornerRadius="3"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineDownCommand" Visibility="Collapsed"/>
                                </Track.IncreaseRepeatButton>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--BOTON MODERNO GENERICO-->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#3A3A3A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="PART_Border"
        Background="{TemplateBinding Background}" 
        CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="PART_Border" Property="Background" Value="#555"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="PART_Border" Property="Background" Value="#0078D7"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--BOTON DE REMPLAZO-->
        <Style x:Key="DeleteButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#00b294"/>
            <!-- Rojo principal -->
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="16,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="PART_Border"
                Background="{TemplateBinding Background}" 
                CornerRadius="5"
                BorderBrush="#177867"
                BorderThickness="1">
                            <ContentPresenter 
                Margin="{TemplateBinding Padding}"
                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="PART_Border" Property="Background" Value="#32D1B6"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="PART_Border" Property="Background" Value="#177867"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="PART_Border" Property="Background" Value="#C0C0C0"/>
                                <Setter Property="Foreground" Value="#808080"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--BOTON BUSCAR-->
        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#0078D7"/>
            <Setter Property="Padding" Value="16,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="PART_Border"
                        Background="{TemplateBinding Background}" 
                        CornerRadius="5">
                            <ContentPresenter 
                        Margin="{TemplateBinding Padding}"
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="PART_Border" Property="Background" Value="#1493FF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="PART_Border" Property="Background" Value="#005A9E"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>
    
    
    <Border HorizontalAlignment="Center" VerticalAlignment="Center" CornerRadius="8" Background="#BB2A2A2A" Padding="8" Margin="10">

        <Grid Margin="40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- TÍTULO -->
            <TextBlock Text="Steamless Replacer" Foreground="White" FontSize="30" FontWeight="Bold" Margin="0,0,0,30"/>

            <!-- CAMPO DE RUTA -->
            <Grid Grid.Row="1" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <!-- TextBox ocupa todo -->
                    <ColumnDefinition Width="Auto"/>
                    <!-- Botón con ancho fijo -->
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Center" CornerRadius="8" Background="#1A1A1A" Padding="0,0,8,0">
                    <TextBox x:Name="TxtFolderPath" Height="45" Background="#1A1A1A" Foreground="White" BorderThickness="0" Padding="10" FontSize="16"
                 VerticalContentAlignment="Center" IsReadOnly="True" Text="Select the game folder…"/>
                </Border>

                <Button Grid.Column="1" Content="Browse folder…" Width="180" Height="40" Margin="10,0,0,0" Click="SelectFolder_Click" Background="#2D89EF"
                        Foreground="White" FontWeight="Bold" FontSize="16" BorderThickness="0" Style="{StaticResource PrimaryButton}"/>
            </Grid>

            <!-- BOTÓN DE REEMPLAZAR -->
            <Button Grid.Row="2" Content="Replace files" Width="200" Height="50" Margin="0,30,0,0" Click="ReplaceDlls_Click" HorizontalAlignment="Left"
            FontWeight="Bold" BorderThickness="0" FontSize="16" Style="{StaticResource DeleteButton}"/>

            <!-- TUTORIAL / INSTRUCTIONS -->
            <Border Grid.Row="3" Background="#1A1A1A" CornerRadius="8" Padding="16" Margin="0,40,0,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Height="300">
                    <StackPanel Margin="0,0,10,0">
                        <TextBlock Text="How to use Steamless Replacer" FontSize="22" FontWeight="Bold" Foreground="White" Margin="0,0,0,16"/>

                        <TextBlock TextWrapping="Wrap" Foreground="White" FontSize="16">
                1. Select the folder where your game is installed. Most Steam games are usually located in:
                        </TextBlock>
                        <TextBlock TextWrapping="Wrap" Foreground="#00BFFF" FontSize="16" Margin="0,4,0,8">
                C:\Program Files (x86)\Steam\steamapps\common
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Foreground="White" FontSize="16">
                2. Click on "Browse folder…" to open the folder picker and select your game's main folder.
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Foreground="White" FontSize="16" Margin="0,8,0,0">
                3. Once selected, click "Replace files". The program will automatically search for
                files and replace that files with the custom ones.
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Foreground="White" FontSize="16" Margin="0,8,0,0">
                4. After the replacement is complete, you can navigate to your game folder and launch the game directly from the
                <Run FontWeight="Bold">.exe</Run> file, without needing Steam to start it.
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Foreground="White" FontSize="16" Margin="0,8,5,0">
                Purpose: This tool allows you to run Steam games directly via the executable by replacing the Steam files with custom ones.
                It is useful for testing, modding, or launching games without opening the Steam client.
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Foreground="White" FontSize="16" Margin="0,8,0,0">
                ⚠️ Note: Make sure the game is fully closed before performing the replacement. Always back up your files if needed and be carefull with the folder that you select.
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Foreground="White" FontSize="22" Margin="0,8,0,0">
⚠️ SOME GAMES WILL NOT WORK, KEEP THIS IN MIND. ALSO, DO NOT SELECT GAMES THAT YOU HAVE BYPASSED.
                        </TextBlock>
                    </StackPanel>
                </ScrollViewer>
            </Border>


        </Grid>


    </Border>
    
</Page>
